<!-- partials/headerAlpine.html -->

<header x-data="menuOverlay()"
        x-init="init()"
        x-effect="document.body.classList.toggle('overflow-hidden', open)"
        class="sticky top-0 z-50 w-full">

        <!-- class="sticky top-0 z-50 w-full bg-white shadow-sm" -->

  <div class="max-w-screen-xl mx-auto flex items-center justify-between px-4 py-3 md:py-4">

    <!-- logotype (left) -->
    <a href="/" class="flex items-center space-x-2">
      <img src="https://s3-us-west-1.amazonaws.com/fogday.ai/ohlone/ohloneSky-text.svg"
           alt="Ohlone Sky"
           class="h-5" /> <!-- h-5 20px -->
    </a>

    <!-- Right: Desktop nav + Mobile hamburger -->
    <div class="flex items-center space-x-4">
      <!-- Desktop nav -->
      <nav class="hidden md:flex space-x-4 items-center text-sm" aria-label="Main Navigation">

        <a href="/00/coalition/" class="ml-5 py-2 px-4 shadow-md no-underline rounded-full text-sm font-medium text-slate-750 bg-indigo-50 hover:bg-gradient-to-t from-slate-300 to-slate-500 hover:font-medium hover:text-white">COALITION</a>
        <a href="/00/faqs/" class="ml-5 py-2 px-4 shadow-md no-underline rounded-full text-sm font-medium text-slate-750 bg-indigo-50 hover:bg-gradient-to-t from-slate-300 to-slate-500 hover:font-medium hover:text-white">FAQs</a>
        <a href="/00/contact/" class="ml-5 py-2 px-4 shadow-md no-underline rounded-full text-sm font-medium text-slate-750 bg-indigo-50 hover:bg-gradient-to-t from-slate-300 to-slate-500 hover:font-medium hover:text-white">CONTACT</a>
      </nav>

      <!-- Mobile Hamburger -->
      <button @click="open = !open"
              :aria-expanded="open"
              aria-controls="menuOverlay"
              aria-label="Toggle menu"
              id="menuToggle"
              class="relative z-50 w-8 h-8 md:hidden">

        <!-- new: Circle appears only when open -->
          <div x-show="open"
               x-transition:enter="transition-opacity duration-300"
               x-transition:enter-start="opacity-0"
               x-transition:enter-end="opacity-100"
               x-transition:leave="transition-opacity duration-200"
               x-transition:leave-start="opacity-100"
               x-transition:leave-end="opacity-0"
              class="absolute top-[-6px] right-[-6px] w-[44px] h-[44px] rounded-full
                 bg-gradient-to-r from-amber-500 to-pink-500 pointer-events-none z-[-1]">
          </div> <!-- end circle addition -->

        <div :class="open
            ? 'top-1/2 transform -translate-y-1/2 rotate-45 scale-x-[0.7] h-[3px] bg-white'
            : 'top-[11px] h-[2px]'"
             class="bar absolute left-0 w-full bg-brandDark rounded transition-all duration-150 ease-in-out"></div>
        <div :class="open
            ? 'top-1/2 transform -translate-y-1/2 -rotate-45 scale-x-[0.7] h-[3px] bg-white'
            : 'bottom-[11px] h-[2px]'"
             class="bar absolute left-0 w-full bg-brandDark rounded transition-all duration-150 ease-in-out"></div>
      </button>
    </div>
  </div>

  <!-- ✅ Backdrop (no blur) -->
  <div x-show="open"
       x-transition:enter="transition-opacity duration-300"
       x-transition:enter-start="opacity-0"
       x-transition:enter-end="opacity-100"
       x-transition:leave="transition-opacity duration-300"
       x-transition:leave-start="opacity-100"
       x-transition:leave-end="opacity-0"
       class="fixed inset-x-0 top-[5px] bottom-[5px] z-30 bg-white/100 md:hidden"
       @click="open = false"
       x-cloak>
  </div>

  <!-- ✅ Slide-Up Mobile Overlay -->
      <nav id="menuOverlay"
         x-show="open"
         x-transition:enter="transition ease-out duration-500"
         x-transition:enter-start="opacity-0 translate-y-4"
         x-transition:enter-end="opacity-100 translate-y-0"
         x-transition:leave="transition ease-in duration-500"
         x-transition:leave-start="opacity-100 translate-y-0"
         x-transition:leave-end="opacity-0 translate-y-4"
         class="fixed left-0 right-0 top-[5px] bottom-[5px] z-40 bg-white px-4 py-8 overflow-y-auto md:hidden"
         tabindex="0"
         x-cloak>

      <!-- Flexbox wrapper to center links with spacing -->
        <div class="flex flex-col justify-center items-center h-full space-y-6">

          <a @click="open = false"
             href="/"
             x-transition:enter="transition ease-out duration-500 delay-[300ms]"
             x-transition:enter-start="opacity-0 translate-y-8"
             x-transition:enter-end="opacity-100 translate-y-0"
             x-transition:leave="transition ease-in duration-400 delay-[600ms]"
             x-transition:leave-start="opacity-100 translate-y-0"
             x-transition:leave-end="opacity-0 -translate-y-8"
             class="block text-3xl font-bold text-brandDark hover:text-highlight transition">
             HOME
          </a>

          <a @click="open = false"
             href="/00/coalition/"
             x-transition:enter="transition ease-out duration-500 delay-[500ms]"
             x-transition:enter-start="opacity-0 translate-y-8"
             x-transition:enter-end="opacity-100 translate-y-0"
             x-transition:leave="transition ease-in duration-400 delay-[600ms]"
             x-transition:leave-start="opacity-100 translate-y-0"
             x-transition:leave-end="opacity-0 -translate-y-8"
             class="block text-3xl font-bold text-brandDark hover:text-highlight transition">
             COALITION
          </a>

          <a @click="open = false"
             href="/00/faqs/"
             x-transition:enter="transition ease-out duration-500 delay-[700ms]"
             x-transition:enter-start="opacity-0 translate-y-8"
             x-transition:enter-end="opacity-100 translate-y-0"
             x-transition:leave="transition ease-in duration-400 delay-[600ms]"
             x-transition:leave-start="opacity-100 translate-y-0"
             x-transition:leave-end="opacity-0 -translate-y-8"
             class="block text-3xl font-bold text-brandDark hover:text-highlight transition">
             FAQs
          </a>

          <a @click="open = false"
             href="/00/contact/"
             x-transition:enter="transition ease-out duration-500 delay-[900ms]"
             x-transition:enter-start="opacity-0 translate-y-8"
             x-transition:enter-end="opacity-100 translate-y-0"
             x-transition:leave="transition ease-in duration-400 delay-[600ms]"
             x-transition:leave-start="opacity-100 translate-y-0"
             x-transition:leave-end="opacity-0 -translate-y-8"
             class="block text-3xl font-bold text-brandDark hover:text-highlight transition">
             CONTACT
          </a>
        </div>
      </nav>
</header>
